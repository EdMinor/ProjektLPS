<!-- Header -->
<app-header [breadcrumbs]="breadcrumbs"></app-header>

<!-- Main Content -->
<div class="catalog-list-container">
  <!-- Compact Header with Filters -->
  <div class="compact-header">
    <div class="header-left">
      <h1>Kataloge</h1>
      <p *ngIf="!selectedTopic">W√§hle einen Katalog aus, um mit dem Lernen zu beginnen</p>
      <p *ngIf="selectedTopic">{{ catalogs.length }} Katalog{{ catalogs.length !== 1 ? 'e' : '' }} verf√ºgbar</p>
    </div>
    
    <div class="header-right">
      <!-- Topic Filter Buttons -->
      <div class="filter-buttons">
        <button 
          class="filter-btn" 
          [class.active]="selectedTopic === '101'"
          (click)="filterByTopic('101')"
        >
          LPIC-101
        </button>
        <button 
          class="filter-btn" 
          [class.active]="selectedTopic === '102'"
          (click)="filterByTopic('102')"
        >
          LPIC-102
        </button>
        <button 
          class="filter-btn" 
          [class.active]="selectedTopic === 'all'"
          (click)="filterByTopic('all')"
        >
          Alle Themen
        </button>
      </div>
      
      <!-- Clear Filter Button -->
      <button 
        *ngIf="selectedTopic" 
        class="clear-filter-btn" 
        (click)="clearFilter()"
      >
        Filter l√∂schen
      </button>
    </div>
  </div>

  <!-- Content -->
  <div class="content">
    <div *ngIf="loading" class="loading">
      <div class="spinner"></div>
      <p>Lade Kataloge...</p>
    </div>

    <div *ngIf="error" class="error">
      <p>{{ error }}</p>
      <button (click)="loadCatalogs()" class="retry-button">Erneut versuchen</button>
    </div>

    <!-- Compact Catalog Grid -->
    <div *ngIf="!loading && !error" class="catalogs-grid">
      <div 
        *ngFor="let catalog of catalogs" 
        class="catalog-card"
        (click)="selectCatalog(catalog)"
      >
        <div class="catalog-header">
          <h3>{{ catalog.title }}</h3>
          <span class="catalog-code">{{ catalog.code }}</span>
        </div>
        <div class="catalog-info">
          <p class="question-count">{{ catalog.questionCount }} Fragen</p>
          <p class="topic">{{ getTopicName(catalog.topicId) }}</p>
        </div>
        <div class="catalog-actions">
          <button class="start-button">Jetzt starten</button>
        </div>
      </div>
    </div>

    <!-- Empty State -->
    <div *ngIf="!loading && !error && catalogs.length === 0" class="empty-state">
      <div class="empty-icon">üìö</div>
      <h3>Keine Kataloge gefunden</h3>
      <p *ngIf="selectedTopic">
        F√ºr "{{ selectedTopic === '101' ? 'LPIC-101' : selectedTopic === '102' ? 'LPIC-102' : 'Alle Themen' }}" sind derzeit keine Kataloge verf√ºgbar.
      </p>
      <p *ngIf="!selectedTopic">
        Es sind derzeit keine Kataloge verf√ºgbar.
      </p>
      <button *ngIf="selectedTopic" (click)="clearFilter()" class="btn btn-outline">
        Alle Kataloge anzeigen
      </button>
    </div>
  </div>
</div>
